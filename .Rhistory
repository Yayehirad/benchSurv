devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
remove.packages("benchSurv")
library(benchSurv)
devtools::document()
devtools::check()
remove.packages("benchSurv")
devtools::document()
devtools::document()
remove.packages("benchSurv")
devtools::document()
remove.packages("benchSurv")
devtools::document()
devtools::check()
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot1)
####### Usage Example 2: only factor vars-----------
benchmark_plot2 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
factor_covariates  = c("ISS_cat","Age_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot2)
benchmark_plot3 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = NULL,    # Numeric covariates (e.g., Age)
factor_covariates  = NULL,      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = TRUE             # Display the legend
)
# Print the resulting funnel plot
print(benchmark_plot3)
benchmark_plot3 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
#numeric_covariates = NULL,    # Numeric covariates (e.g., Age)
#factor_covariates  = NULL,      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = TRUE             # Display the legend
)
# Print the resulting funnel plot
print(benchmark_plot3)
remove.packages("benchSurv")
devtools::document()
devtools::install()
devtools::check()
remove.packages("benchSurv")
devtools::document()
devtools::check()
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot1)
####### Usage Example 2: only factor vars-----------
benchmark_plot2 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
factor_covariates  = c("ISS_cat","Age_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot2)
benchmark_plot3 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = NULL,    # Numeric covariates (e.g., Age)
factor_covariates  = NULL,      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = TRUE             # Display the legend
)
# Print the resulting funnel plot
print(benchmark_plot3)
remove.packages("benchSurv")
devtools::install_github("Yayehirad/benchSurv", ref = "master")
remove.packages("benchSurv")
devtools::install_github("Yayehirad/benchSurv", ref = "master")
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot1)
####### Usage Example 2: only factor vars-----------
benchmark_plot2 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
factor_covariates  = c("ISS_cat","Age_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot2)
benchmark_plot3 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = NULL,    # Numeric covariates (e.g., Age)
factor_covariates  = NULL,      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = TRUE             # Display the legend
)
# Print the resulting funnel plot
print(benchmark_plot3)
remove.packages("benchSurv")
devtools::document()
devtools::check()
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot1)
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
benchmark_plot1 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = c("Age_centered"),    # Numeric covariates (e.g., Age)
factor_covariates  = c("ISS_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot1)
####### Usage Example 2: only factor vars-----------
benchmark_plot2 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
factor_covariates  = c("ISS_cat","Age_cat"),      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = F             # Display the legend
)
# Display the generated funnel plot
print(benchmark_plot2)
benchmark_plot3 <- benchSurv::benchmark_survival(
data = test_data,
center_col = "Sitename",          # Column with center identifiers
status_col = "Death",             # Column with event status (0/1)
time_col = "DTime",               # Column with survival times
fixed_time = 36,                  # Fixed time point for survival analysis (36 months)
numeric_covariates = NULL,    # Numeric covariates (e.g., Age)
factor_covariates  = NULL,      # Factor covariates (e.g., ISS)
highlight_center = "SiteA",       # Center to highlight in the plot
conf_levels = c(0.8, 0.95),         # Confidence levels for funnel plot limits
include_legend = TRUE             # Display the legend
)
# Print the resulting funnel plot
print(benchmark_plot3)
remove.packages("benchSurv")
devtools::document()
devtools::check()
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
result_scaling <- benchmark_survival(
data = test_data,
center_col = "Sitename",
status_col = "Death",
time_col = "DTime",
fixed_time = 36,
numeric_covariates = NULL,
factor_covariates = NULL,
highlight_center = "SiteA",
conf_levels = c(0.8, 0.95),
include_legend = TRUE,
variance_method = "scaling"
)
remove.packages("benchSurv")
library(benchSurv)
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
result_scaling <- benchmark_survival(
data = test_data,
center_col = "Sitename",
status_col = "Death",
time_col = "DTime",
fixed_time = 36,
numeric_covariates = NULL,
factor_covariates = NULL,
highlight_center = "SiteA",
conf_levels = c(0.8, 0.95),
include_legend = TRUE,
variance_method = "scaling"
)
print(result_scaling$plot)
print(result_scaling$metrics)
print(result_scaling$funnel_limits)
result_greenwood <- benchmark_survival(
data = test_data,
center_col = "Sitename",
status_col = "Death",
time_col = "DTime",
fixed_time = 36,
numeric_covariates = NULL,
factor_covariates = NULL,
highlight_center = "SiteA",
conf_levels = c(0.8, 0.95),
include_legend = TRUE,
variance_method = "greenwood"
)
print(result_greenwood$plot)
print(result_greenwood$metrics)
print(result_greenwood$funnel_limits)
print(result_scaling$plot)
remove.packages("benchSurv")
devtools::document()
devtools::check()
devtools::install()
library(benchSurv)
library(tidyverse)
### Load Test Data-------------
test_data<-read.csv("C:/Users/yyay0001/Rpackage/bench_resources/test_data.csv")
### Inspect Data Structure
str(test_data)
head(test_data)
summary(test_data)
### Run Full Benchmarking Process
# Load the data
# Example usage of the benchSurv package's benchmark_survival function
# Load your test data (replace with your actual data source)
# test_data <- read.csv("your_data_file.csv")
# Run the benchmark_survival function from the benchSurv package
#set reference level for the hz
# Convert ISS_cat to an unordered factor (if it's not already)
test_data$ISS_cat <- factor(test_data$ISS_cat, ordered = FALSE)
# Now you can safely relevel to "stage1"
test_data$ISS_cat <- relevel(test_data$ISS_cat, ref = "stage1")
# Similarly for Age_cat
test_data$Age_cat <- factor(test_data$Age_cat, ordered = FALSE)
test_data$Age_cat <- relevel(test_data$Age_cat, ref = "<50")
test_data <- test_data %>%
dplyr::mutate(Age_centered = Age - mean(Age, na.rm = TRUE))
result_scaling <- benchmark_survival(
data = test_data,
center_col = "Sitename",
status_col = "Death",
time_col = "DTime",
fixed_time = 36,
numeric_covariates = NULL,
factor_covariates = NULL,
highlight_center = "SiteA",
conf_levels = c(0.8, 0.95),
include_legend = TRUE,
variance_method = "scaling"
)
